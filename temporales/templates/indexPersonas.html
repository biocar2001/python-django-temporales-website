{% extends 'base.html' %}

{% block content %}
{% load static %}
<div class="container">
    <button data-toggle="modal" data-target="#squarespaceModal" class="save btn btn-success">Filtrar</button>
    <td></td>
    <a href="/newPersona/" class="save btn btn-info" role="button" aria-disabled="true">Nuevo</a>
    <a href="/personas/" class="save btn btn-warning" role="button" aria-disabled="true">Limpiar Filtros</a>
</div><br>
<!-- line modal -->
<div class="modal fade" id="squarespaceModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
			<h3 class="modal-title" id="lineModalLabel">Filtros</h3>
		</div>
		<div class="modal-body">
            {% if formFilter%}
            <!-- content goes here -->
			<form method="POST" action="{% url 'personas' %}" id="filter" class="form">{% csrf_token %}
			{{ formFilter.as_p }}


              <button type="submit" class="btn btn-primary">Filtrar</button>
            </form>
            {% endif %}
		</div>

	</div>
  </div>
</div>
 <div class="container">

{% if personas %}
	<u> LISTADO DE PERSONAS</u>
	<table class="table table-striped">
	<thead class="thead-default">
    	<tr>
    	 <th>Nombre</th>
    	  <th>Apellidos</th>
    	  <th>Nivel Ingles</th>
    	  <th>Edad</th>
    	  <th>Empresa</th>
    	  <th></th>
    	</tr>
	</thead>
  <tbody>
	{% for persona in personas %}
		<tr>
		  <td>{{persona.nombre}}</td>
		  <td>{{persona.apellidos}}</td>
		  <td>{{persona.ingles}}</td>
		  <td>{{persona.age}}</td>
		  <td>{{persona.empresa}}</td>
		  <td><a href="/detailPersona/{{persona.id}}" class="save btn btn-primary" role="button" aria-disabled="true">Detalle</a></td>
		</tr>
	{% endfor %}
	</tbody>
	</table>
    <nav aria-label="...">
        <ul class="pagination">

            {% if personas.has_previous %}
            <li class="page-item disabled">
              <a class="page-link" href="?page={{ personas.previous_page_number }}" tabindex="-1" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            {% endif %}
            <li class="page-item active">
                <span class="current">
                    Page {{ personas.number }} of {{ personas.paginator.num_pages }}.
                </span>
            </li>

            {% if personas.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ personas.next_page_number }}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>
            {% endif %}
            <li class="page-item"><strong>Total Personas:</strong> {{ personas.paginator.count }}</li>

        </ul>
    </nav>

{% else %}
	<h1 class="jumbotron-heading"> El filtro seleccionado no devuelve resultados o No existen personas en la base de datos</h1>
{% endif %}
</div>

  {% endblock %}